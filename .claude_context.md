# ğŸ“ Structure ComplÃ¨te du Projet KiloShare

## ğŸ—ï¸ Architecture GÃ©nÃ©rale
```
kiloshare/
â”œâ”€â”€ ğŸ“± app/          # Application Flutter (iOS/Android)
â”œâ”€â”€ ğŸŒ web/            # Interface Web Next.js avec panel admin
â”œâ”€â”€ âš™ï¸ api/        # API REST PHP avec architecture MVC
â””â”€â”€ ğŸ—„ï¸ database/       # Scripts SQL et schÃ©mas de base de donnÃ©es
```

---

## ğŸ“± **Mobile (Flutter)**
```
app/
â”œâ”€â”€ android/                    # Configuration Android
â”œâ”€â”€ ios/                       # Configuration iOS
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ config/               # Configuration app (environnements, thÃ¨mes)
â”‚   â”‚   â”œâ”€â”€ app_config.dart
â”‚   â”‚   â””â”€â”€ theme.dart
â”‚   â”œâ”€â”€ modules/              # Modules mÃ©tier
â”‚   â”‚   â”œâ”€â”€ auth/            # Authentification
â”‚   â”‚   â”‚   â”œâ”€â”€ blocs/       # BLoC pattern pour gestion d'Ã©tat
â”‚   â”‚   â”‚   â”œâ”€â”€ models/      # ModÃ¨les de donnÃ©es
â”‚   â”‚   â”‚   â”œâ”€â”€ screens/     # Ã‰crans UI
â”‚   â”‚   â”‚   â””â”€â”€ services/    # Services API
â”‚   â”‚   â”œâ”€â”€ booking/         # SystÃ¨me de rÃ©servation
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ home/            # Ã‰cran d'accueil
â”‚   â”‚   â”œâ”€â”€ profile/         # Profil utilisateur
â”‚   â”‚   â”‚   â”œâ”€â”€ models/      # UserProfile, TrustBadge, etc.
â”‚   â”‚   â”‚   â”œâ”€â”€ screens/     # edit_profile, profile, settings
â”‚   â”‚   â”‚   â”œâ”€â”€ services/    # profile_service.dart
â”‚   â”‚   â”‚   â””â”€â”€ widgets/     # Composants rÃ©utilisables
â”‚   â”‚   â”œâ”€â”€ search/          # Recherche de trajets
â”‚   â”‚   â””â”€â”€ trips/           # Gestion des trajets
â”‚   â”‚       â”œâ”€â”€ bloc/        # trip_bloc.dart
â”‚   â”‚       â”œâ”€â”€ models/      # Trip, TripImage, etc.
â”‚   â”‚       â”œâ”€â”€ screens/     # search_trips, trip_details
â”‚   â”‚       â”œâ”€â”€ services/    # trip_service, favorites_service
â”‚   â”‚       â””â”€â”€ widgets/     # trip_card, price_calculator
â”‚   â”œâ”€â”€ services/            # Services globaux
â”‚   â”‚   â”œâ”€â”€ cloudinary_image_service.dart
â”‚   â”‚   â””â”€â”€ stripe_service.dart
â”‚   â”œâ”€â”€ themes/              # ThÃ¨mes et styles
â”‚   â”œâ”€â”€ utils/               # Utilitaires
â”‚   â”œâ”€â”€ widgets/             # Widgets rÃ©utilisables
â”‚   â”‚   â””â”€â”€ optimized_cloudinary_image.dart  # CloudinaryAvatar
â”‚   â””â”€â”€ main.dart            # Point d'entrÃ©e
â”œâ”€â”€ pubspec.yaml            # DÃ©pendances Flutter
â””â”€â”€ test/                   # Tests unitaires
```

---

## ğŸŒ **Web (Next.js)**
```
web/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ admin/              # Panel d'administration
â”‚   â”‚   â”œâ”€â”€ dashboard/      # Tableau de bord admin
â”‚   â”‚   â”œâ”€â”€ users/         # Gestion utilisateurs
â”‚   â”‚   â”œâ”€â”€ trips/         # Gestion trajets
â”‚   â”‚   â”œâ”€â”€ messages/      # Messages
â”‚   â”‚   â”œâ”€â”€ reports/       # Rapports
â”‚   â”‚   â”œâ”€â”€ transactions/  # Transactions
â”‚   â”‚   â”œâ”€â”€ settings/      # ParamÃ¨tres
â”‚   â”‚   â””â”€â”€ layout.tsx     # Layout admin
â”‚   â”œâ”€â”€ api/               # API Routes Next.js
â”‚   â”‚   â”œâ”€â”€ admin/         # Endpoints admin
â”‚   â”‚   â””â”€â”€ user/          # Endpoints utilisateur
â”‚   â”œâ”€â”€ trips/             # Pages publiques trajets
â”‚   â”œâ”€â”€ layout.tsx         # Layout principal
â”‚   â””â”€â”€ page.tsx           # Page d'accueil
â”œâ”€â”€ components/            # Composants React
â”‚   â”œâ”€â”€ admin/            # Composants admin
â”‚   â”‚   â”œâ”€â”€ AdminAuthProvider.tsx
â”‚   â”‚   â”œâ”€â”€ AdminHeader.tsx
â”‚   â”‚   â””â”€â”€ AdminSidebar.tsx
â”‚   â”œâ”€â”€ MobileBottomNav.tsx
â”‚   â”œâ”€â”€ Navigation.tsx
â”‚   â”œâ”€â”€ TripWorkflowActions.tsx
â”‚   â””â”€â”€ TripWorkflowHistory.tsx
â”œâ”€â”€ hooks/                # Hooks React personnalisÃ©s
â”‚   â”œâ”€â”€ useAdminAuth.ts
â”‚   â””â”€â”€ useTripWorkflow.ts
â”œâ”€â”€ utils/                # Utilitaires
â”œâ”€â”€ package.json          # DÃ©pendances Node.js
â””â”€â”€ next.config.js        # Configuration Next.js
```

---

## âš™ï¸ **Backend (PHP)**
```
api/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.php          # Point d'entrÃ©e API
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Controllers/       # ContrÃ´leurs MVC
â”‚   â”‚   â”œâ”€â”€ AuthController.php
â”‚   â”‚   â”œâ”€â”€ UserProfileController.php
â”‚   â”‚   â”œâ”€â”€ TripController.php
â”‚   â”‚   â”œâ”€â”€ BookingController.php
â”‚   â”‚   â”œâ”€â”€ SearchController.php
â”‚   â”‚   â”œâ”€â”€ MessageController.php
â”‚   â”‚   â”œâ”€â”€ NotificationController.php
â”‚   â”‚   â””â”€â”€ AdminController.php
â”‚   â”œâ”€â”€ Models/            # ModÃ¨les Eloquent ORM
â”‚   â”‚   â”œâ”€â”€ User.php
â”‚   â”‚   â”œâ”€â”€ Trip.php
â”‚   â”‚   â”œâ”€â”€ TripFavorite.php
â”‚   â”‚   â”œâ”€â”€ TripImage.php
â”‚   â”‚   â”œâ”€â”€ Booking.php
â”‚   â”‚   â”œâ”€â”€ Message.php
â”‚   â”‚   â”œâ”€â”€ Notification.php
â”‚   â”‚   â”œâ”€â”€ Payment.php
â”‚   â”‚   â””â”€â”€ UserToken.php
â”‚   â”œâ”€â”€ Middleware/        # Middlewares HTTP
â”‚   â”‚   â”œâ”€â”€ AuthMiddleware.php
â”‚   â”‚   â””â”€â”€ CorsMiddleware.php
â”‚   â”œâ”€â”€ Services/          # Services mÃ©tier (vide - logique dans contrÃ´leurs)
â”‚   â””â”€â”€ Utils/             # Utilitaires
â”œâ”€â”€ config/               # Configuration
â”‚   â”œâ”€â”€ config.php        # Configuration gÃ©nÃ©rale
â”‚   â”œâ”€â”€ database.php      # Configuration BDD
â”‚   â””â”€â”€ routes.php        # DÃ©finition des routes
â”œâ”€â”€ migrations/           # Scripts de migration BDD
â”‚   â”œâ”€â”€ add_missing_columns.sql
â”‚   â””â”€â”€ add_missing_columns_v2.sql
â”œâ”€â”€ storage/             # Stockage fichiers
â”‚   â”œâ”€â”€ logs/
â”‚   â””â”€â”€ uploads/
â”œâ”€â”€ composer.json        # DÃ©pendances PHP
â”œâ”€â”€ .env.example         # Variables d'environnement
â””â”€â”€ README.md
```

---

## ğŸ—„ï¸ **Database**
```
database/
â”œâ”€â”€ schema.sql                    # SchÃ©ma complet de la BDD
â”œâ”€â”€ auth_tables.sql              # Tables d'authentification
â”œâ”€â”€ social_auth_tables.sql       # Authentification sociale
â”œâ”€â”€ email_verification_table.sql # VÃ©rification email
â”œâ”€â”€ phone_verification_table.sql # VÃ©rification tÃ©lÃ©phone
â””â”€â”€ password_resets_table.sql    # Reset de mot de passe
```

---

## ğŸ“‹ **Fichiers de Configuration Racine**
```
kiloshare/
â”œâ”€â”€ .claude_project.json         # Configuration Claude Code
â”œâ”€â”€ .claude_context.md          # Ce fichier - documentation structure
â”œâ”€â”€ WORKFLOW_TESTING.md         # Documentation des tests
â””â”€â”€ .git/                       # ContrÃ´le de version Git
```

---

## ğŸ”§ **Technologies UtilisÃ©es**

### Mobile (Flutter)
- **Language**: Dart
- **Framework**: Flutter 3.x
- **Architecture**: BLoC Pattern
- **State Management**: flutter_bloc
- **HTTP**: Dio
- **Navigation**: GoRouter
- **Storage**: flutter_secure_storage
- **Images**: cached_network_image, CloudinaryAvatar
- **UI**: Material Design 3

### Web (Next.js)
- **Language**: TypeScript
- **Framework**: Next.js 14+ (App Router)
- **UI**: React 18, Tailwind CSS
- **State**: React Hooks, Context API
- **Auth**: JWT avec refresh tokens
- **API**: Next.js API Routes

### Backend (PHP)
- **Language**: PHP 8+
- **Framework**: Vanilla PHP avec architecture MVC
- **ORM**: Eloquent (Laravel components)
- **Database**: MySQL
- **Auth**: JWT avec Firebase
- **Images**: Cloudinary SDK
- **HTTP**: PSR-7 compliant
- **Routing**: FastRoute

### Database
- **SGBD**: MySQL 8.0+
- **ORM**: Eloquent
- **Migrations**: Scripts SQL manuels
- **Indexation**: OptimisÃ©e pour les recherches

---

## ğŸš€ **FonctionnalitÃ©s Principales**

### ğŸ“± **Application Mobile**
- âœ… Authentification complÃ¨te (phone, email, social)
- âœ… Profil utilisateur avec avatar Cloudinary
- âœ… Recherche et rÃ©servation de trajets
- âœ… SystÃ¨me de favoris
- âœ… Chat en temps rÃ©el
- âœ… Paiements Stripe
- âœ… Notifications push

### ğŸŒ **Interface Web**
- âœ… Panel d'administration complet
- âœ… Gestion utilisateurs et trajets
- âœ… SystÃ¨me de workflow d'approbation
- âœ… Statistiques et rapports
- âœ… Interface publique de recherche

### âš™ï¸ **API Backend**
- âœ… API REST complÃ¨te
- âœ… Authentification JWT
- âœ… Upload d'images Cloudinary
- âœ… SystÃ¨me de favoris
- âœ… Gestion des rÃ©servations
- âœ… Administration complÃ¨te

---

## ğŸ“Š **Ã‰tat Actuel du Projet**

### âœ… **FonctionnalitÃ©s ComplÃ¨tes**
- SystÃ¨me d'authentification multi-canal
- Profil utilisateur avec tous les champs
- Affichage des avatars Cloudinary optimisÃ©
- SystÃ¨me de favoris fonctionnel
- Panel d'administration web
- API REST complÃ¨te

### ğŸ”„ **En Cours de DÃ©veloppement**
- Tests automatisÃ©s
- Optimisations performances
- Documentation API

### ğŸ“ˆ **MÃ©triques**
- **Mobile**: ~100 fichiers Dart
- **Web**: ~50 fichiers TypeScript/TSX  
- **Backend**: ~25 fichiers PHP
- **Database**: 15+ tables avec relations

---

## ğŸ¯ **Workflow Git & DÃ©veloppement**

### Branches
- **master**: Production
- **claude/[feature]-[date]**: Branches de travail Claude
- Toujours crÃ©er une nouvelle branche pour chaque feature

### RÃ¨gles de DÃ©veloppement
1. Ne jamais commiter directement sur master
2. Toujours travailler sur une branche claude/*
3. Commiter rÃ©guliÃ¨rement avec des messages descriptifs
4. CrÃ©er des petits commits atomiques
5. Documenter chaque nouvelle fonctionnalitÃ©

## ğŸš« **Instructions importantes pour Claude Code**

### **NE PAS lancer de serveurs**
- âŒ Ne jamais exÃ©cuter `npm run dev`
- âŒ Ne jamais exÃ©cuter `flutter run` 
- âŒ Ne jamais exÃ©cuter `php -S 127.0.0.1:8080 -t public`
- âŒ Aucune commande de dÃ©marrage de serveur

**Raison** : L'environnement de dÃ©veloppement est gÃ©rÃ© sÃ©parÃ©ment.

### **Actions autorisÃ©es uniquement**
- âœ… Modifier le code
- âœ… CrÃ©er/Ã©diter des fichiers
- âœ… Installer des dÃ©pendances (`composer install`, `npm install`)
- âœ… ExÃ©cuter des migrations/scripts SQL
- âœ… GÃ©nÃ©rer du code

Cette structure reflÃ¨te une architecture moderne multi-plateforme avec sÃ©paration claire des responsabilitÃ©s et technologies adaptÃ©es Ã  chaque contexte d'usage.